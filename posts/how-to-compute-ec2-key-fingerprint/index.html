<!doctype html>
<html lang="en-US">
  <head>

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-22300706-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-22300706-1');
    </script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0;">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <meta name="description" content="Ever happened to you that you wanted to know which SSH key you were using to connect to an AWS EC2 instance? You first check which key pair the instance is using AWS console or some command like:
$ aws ec2 describe-instances --instance-ids i-s0m3th1ng --query &#39;Reservations[*].Instances[*].KeyName&#39; somekey You then check what&rsquo;s the fingerprint of the key:
$ aws ec2 describe-key-pairs --key-names somekey { &quot;KeyPairs&quot;: [ { &quot;KeyName&quot;: &quot;somekey&quot;, &quot;KeyFingerprint&quot;: &quot;76:f2:ac:2e:62:7f:a6:f7:73:f5:de:f1:f5:98:c2:df&quot; } ] } And then you ask yourself (or Google) how to get the EC2 fingerprint of a key?">

    <title>EC2 Key Pairs Fingerprinting</title>
    <meta content="EC2 Key Pairs Fingerprinting" property="og:title" />
    <link rel="canonical" href="https://inkel.github.io/posts/how-to-compute-ec2-key-fingerprint/">

    <meta content="https://inkel.github.io/images/avatar.png" property="og:image" />
    <meta content="inkel" property="og:site_name" />
    <meta content="website" property="og:type" />
    <meta content="https://inkel.github.io/posts/how-to-compute-ec2-key-fingerprint/" property="og:url" />
    <meta content="Ever happened to you that you wanted to know which SSH key you were using to connect to an AWS EC2 instance? You first check which key pair the instance is using AWS console or some command like:
$ aws ec2 describe-instances --instance-ids i-s0m3th1ng --query &#39;Reservations[*].Instances[*].KeyName&#39; somekey You then check what&rsquo;s the fingerprint of the key:
$ aws ec2 describe-key-pairs --key-names somekey { &quot;KeyPairs&quot;: [ { &quot;KeyName&quot;: &quot;somekey&quot;, &quot;KeyFingerprint&quot;: &quot;76:f2:ac:2e:62:7f:a6:f7:73:f5:de:f1:f5:98:c2:df&quot; } ] } And then you ask yourself (or Google) how to get the EC2 fingerprint of a key?" property="og:description" />
    <meta name="twitter:label1" value="Reading time">
    <meta name="twitter:data1" value="1min.">
    <meta name="twitter:label1" value="Published on">
    <meta name="twitter:data1" value="2017-24-10">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
  </head>
  <body lang="">
    <header>
      <h1>
        <a href="/"><img src="/images/avatar.png" id="avatar" />inkel</a>
      </h1>
      
    </header>



<article class="page">
  <header>
    <h1>
      <a href="/posts/how-to-compute-ec2-key-fingerprint/">EC2 Key Pairs Fingerprinting</a>
    </h1>
  </header>

  <section class="meta">
    <span class="reading-time">Reading time: 1min.</span>
    <time datetime="2017-10-24 16:38:20 -0300 -03">Published on 2017-24-10</time>
    <nav class="tags">
      
      <a href="/tags/go">go</a>
      
      <a href="/tags/aws">aws</a>
      
    </nav>
  </section>

  <section class="content">
    <p>Ever happened to you that you wanted to know which SSH key you were using to connect to an AWS EC2 instance? You first check which key pair the instance is using AWS console or some command like:</p>
<pre><code>$ aws ec2 describe-instances --instance-ids i-s0m3th1ng --query 'Reservations[*].Instances[*].KeyName'
somekey
</code></pre><p>You then check what&rsquo;s the fingerprint of the key:</p>
<pre><code>$ aws ec2 describe-key-pairs --key-names somekey
{
    &quot;KeyPairs&quot;: [
        {
            &quot;KeyName&quot;: &quot;somekey&quot;,
            &quot;KeyFingerprint&quot;: &quot;76:f2:ac:2e:62:7f:a6:f7:73:f5:de:f1:f5:98:c2:df&quot;
        }
    ]
}
</code></pre><p>And then you ask yourself (or Google) <em>how to get the EC2 fingerprint of a key?</em> and you encounter the following two solutions:</p>
<ul>
<li>if the key was generated by AWS, then use <code>openssl pkcs8 -in path/to/key.pem -nocrypt -topk8 -outform DER | openssl sha1 -c</code></li>
<li>if the key was generated using <code>ssh-keygen</code> then use <code>openssl rsa -in path/to/private/key -pubout -outform DER | openssl md5 -c</code></li>
</ul>
<p>This is confusing, to say the least, and at the moment of writing this, and I don&rsquo;t really know why.</p>
<p>Having to remember these commands is painful, so I&rsquo;ve made a small utility that give a set of files it displays a table with the file name and it&rsquo;s PKCS8 and RSA fingerprint:</p>
<pre><code>$ ec2-key-fingerprint path/to/key
</code></pre>
  </section>

  <nav id="next-prev">
    <a class="next" href="/posts/ec2-key-fingerprint/">EC2 Key Pairs Fingerprinting &gt;</a>
    <a class="prev" href="/posts/on-go-package-names/">&lt; On Go package names</a>
    
  </nav>
</article>


    <footer>
      <nav id="social">
        <a href="https://flickr.com/inkel">flickr</a><a href="https://github.com/inkel">github</a><a href="https://goodreads.com/inkel">goodreads</a><a href="https://instagram.com/inkel">instagram</a><a href="https://twitter.com/inkel">twitter</a>
      </nav>
    </footer>
  </body>
</html>

